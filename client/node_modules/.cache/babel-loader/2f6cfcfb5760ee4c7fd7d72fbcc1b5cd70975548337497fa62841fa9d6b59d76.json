{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/music_playlist/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/workspace/music_playlist/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/workspace/music_playlist/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/workspace/music_playlist/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/workspace/music_playlist/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useMutation}from\"@apollo/client\";import{LOGIN}from\"../util/mutation\";import Auth from\"../util/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SignInForm(){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formState=_useState2[0],setFormState=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errMessage=_useState4[0],setErrMessage=_useState4[1];var _useMutation=useMutation(LOGIN),_useMutation2=_slicedToArray(_useMutation,2),login=_useMutation2[0],error=_useMutation2[1].error;var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setFormState(_objectSpread(_objectSpread({},formState),{},_defineProperty({},name,value)));};var handleFormSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _response$data$login,response,token;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return login({variables:{email:formState.email,password:formState.password}});case 4:response=_context.sent;token=(_response$data$login=response.data.login)===null||_response$data$login===void 0?void 0:_response$data$login.token;if(token){Auth.login(token);}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);setErrMessage(_context.t0.message);case 12:case\"end\":return _context.stop();}},_callee,null,[[1,9]]);}));return function handleFormSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"form-container sign-in-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign in\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"social-container\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"social\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-facebook-f\"})}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"social\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-google-plus-g\"})}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"social\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fab fa-linkedin-in\"})})]}),/*#__PURE__*/_jsx(\"span\",{children:\"or use your account\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",name:\"email\",value:formState.email,onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",value:formState.password,onChange:handleChange}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",children:\"Forgot your password?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ghost\",children:\"Sign In\"})]})});}export default SignInForm;","map":{"version":3,"names":["React","useState","useMutation","LOGIN","Auth","jsx","_jsx","jsxs","_jsxs","SignInForm","_useState","email","password","_useState2","_slicedToArray","formState","setFormState","_useState3","_useState4","errMessage","setErrMessage","_useMutation","_useMutation2","login","error","handleChange","e","_e$target","target","name","value","_objectSpread","_defineProperty","handleFormSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_response$data$login","response","token","wrap","_callee$","_context","prev","next","preventDefault","variables","sent","data","t0","message","stop","_x","apply","arguments","className","children","onSubmit","href","type","placeholder","onChange"],"sources":["/workspace/music_playlist/client/src/Components/SignIn.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useMutation } from \"@apollo/client\";\nimport { LOGIN } from \"../util/mutation\";\nimport Auth from \"../util/auth\";\n\nfunction SignInForm() {\n  const [formState, setFormState] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [errMessage, setErrMessage] = useState(null);\n  const [login, { error }] = useMutation(LOGIN);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormState({\n      ...formState,\n      [name]: value,\n    });\n  };\n\n  const handleFormSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await login({\n        variables: { email: formState.email, password: formState.password },\n      });\n\n      const token = response.data.login?.token;\n\n      if (token) {\n        Auth.login(token);\n      }\n    } catch (err) {\n      setErrMessage(err.message);\n    }\n  };\n\n  return (\n    <div className=\"form-container sign-in-container\">\n      <form onSubmit={handleFormSubmit}>\n        <h1>Sign in</h1>\n        <div className=\"social-container\">\n          <a href=\"#\" className=\"social\">\n            <i className=\"fab fa-facebook-f\" />\n          </a>\n          <a href=\"#\" className=\"social\">\n            <i className=\"fab fa-google-plus-g\" />\n          </a>\n          <a href=\"#\" className=\"social\">\n            <i className=\"fab fa-linkedin-in\" />\n          </a>\n        </div>\n        <span>or use your account</span>\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          name=\"email\"\n          value={formState.email}\n          onChange={handleChange}\n        />\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Password\"\n          value={formState.password}\n          onChange={handleChange}\n        />\n        <a href=\"#\">Forgot your password?</a>\n        <button className=\"ghost\" >Sign In</button>\n      </form>\n    </div>\n  );\n}\n\nexport default SignInForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}